<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location, Weather, and Address Information</title>
</head>
<body>
    <h1>Location, Weather, and Address Information</h1>
    <p id="location-status"></p>
    <p id="coordinates"></p>
    <pre id="nominatim-address"></pre>
    <pre id="opencage-address"></pre>
    <pre id="weather"></pre>

    <script>
        window.onload = function() {
            getLocation();
        };

        function getLocation() {
            const status = document.getElementById('location-status');
            const coordinates = document.getElementById('coordinates');

            if (navigator.geolocation) {
                status.textContent = "Requesting location...";
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        status.textContent = "Location retrieved successfully!";
                        coordinates.textContent = `Latitude: ${lat}, Longitude: ${lon}`;

                        // Fetch and display full data from Nominatim, OpenCage, and Open-Meteo
                        getNominatimAddress(lat, lon);
                        getOpenCageAddress(lat, lon);
                        getWeather(lat, lon);
                    },
                    (error) => {
                        status.textContent = `Error retrieving location: ${error.message}`;
                    }
                );
            } else {
                status.textContent = "Geolocation is not supported by this browser.";
            }
        }

        function getNominatimAddress(lat, lon) {
            const nominatimAddressElement = document.getElementById('nominatim-address');
            const url = `https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    nominatimAddressElement.textContent = `Nominatim Data:\n${JSON.stringify(data, null, 2)}`;
                })
                .catch(error => {
                    nominatimAddressElement.textContent = `Error retrieving Nominatim data: ${error.message}`;
                });
        }

        function getOpenCageAddress(lat, lon) {
            const openCageAddressElement = document.getElementById('opencage-address');
            const apiKey = 'YOUR_OPENCAGE_API_KEY'; // Replace with your OpenCage API key
            const url = `https://api.opencagedata.com/geocode/v1/json?q=${lat}+${lon}&key=${apiKey}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data && data.results && data.results.length > 0) {
                        openCageAddressElement.textContent = `OpenCage Data:\n${JSON.stringify(data.results[0], null, 2)}`;
                    } else {
                        openCageAddressElement.textContent = "OpenCage address not found.";
                    }
                })
                .catch(error => {
                    openCageAddressElement.textContent = `Error retrieving OpenCage data: ${error.message}`;
                });
        }

        function getWeather(lat, lon) {
            const weatherElement = document.getElementById('weather');
            const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    weatherElement.textContent = `Open-Meteo Data:\n${JSON.stringify(data, null, 2)}`;
                })
                .catch(error => {
                    weatherElement.textContent = `Error retrieving weather data: ${error.message}`;
                });
        }
    </script>
</body>
</html>
